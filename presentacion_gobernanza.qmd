---
title: "Centralidad y  resiliencia ante desastres por inundaciones:"
subtitle: "Un caso de estudio en Rio Grande do Sul"
date: "2024-10-03"
date-format: long
author: "Ricardo Ruiz Sánchez"
institute: "HeiGIT & ITC Enschede (GIMA)"
keywords: 
  - Centralidad de redes
  - Gobernnza del riesgo de desastres
  - Resiliencia urbana 
editor: visual
repo-url: https://rruiz-s.github.io/heigit_presentation/heigit_presentation.html#/title-slide
format:
  revealjs:
    width: 1400
    margin: 0
    incremental: false
    theme: [default, custom.scss]
    toc-depth: 2
    code-fold: true
    code-link: true
    code-line-numbers: true
    logo: images/logo_wide.png
    slide-number: true
    footer: "Estudiante del máster [GIMA](https://www.uu.nl/en/masters/geographical-information-management-and-applications-gima) y  practicante en el departamento de Geoinformación para ayuda huanitaria en [HeiGIT](https://heigit.org/geoinformation-for-humanitarian-aid/).  <br> Código de la presentación disponible en [GitHub](https://rruiz-s.github.io/heigit_presentation/heigit_presentation.html#/title-slide)."
    progress: true
    title-slide-attributes:
      data-background-size: contain
    toc-title: Content
    chalkboard: true
---


# Marco teórico (I) {.smalller}

![](images/framework_heigit.png){fig-align="center"}


::: {.notes}
Objetivo y temática: Mejorar la resiliencia urbana identificando carreteras críticas a través del análisis de centralidad en un escenario de inundación.
Presenten el título del proyecto y el objetivo principal, indicando el tema central y qué buscan lograr con la investigación.
:::

# Marco teórico (II)

::::{.columns}

:::{.column width="80%"}

```{r}
#| eval: false

library(DBI)
library(tidyverse)
library(sf)
eisenberg_connection <- DBI::dbConnect(RPostgres::Postgres(),
                          user= "docker",
                          password = "docker",
                          host = "localhost",
                          dbname="gis",
                          port = 25432)
pre_network_largest <- st_read(eisenberg_connection, "porto_alegre_net_largest")
porto_alegre_net_pre_ors <- st_read(eisenberg_connection,"porto_alegre_net_pre_ors")

porto_alegre_net_pre_ors |>
  dplyr::select(c(-unidirectid, -bidirectid)) |>
  rename(id = ogc_fid) |> 
  mutate(weight=round(weight,2),
         the_geom = as.character(the_geom)) |> 
  slice(1:5) |>
  DT::datatable()

centrality_weighted_100_bidirect_cleaned <- st_read(eisenberg_connection,"centrality_weighted_100_bidirect_cleaned")
```


![](/images/heigit_map.png)
:::

:::{.column width="20%" .fragment}

![](/images/table_ors.png){width="130%"}
$$
G = (V,E)
$$

:::

::::

# Contexto

::::{.columns}

:::{.column width="80%"}

```{=html}

<iframe width="900" height="600" src="/media/hot_intro.html" title = "Sum Edge Betweenness in the Urban Settlement located in Porto Alegre" data-external="1"></iframe>
```

:::

:::{.column width="20%" .fragment}

![](/images/buildings.png){width="130%"}

:::

::::

::: {.notes}
Expliquen la situación específica que están investigando, el contexto del estudio de caso y por qué es un problema crítico que requiere estudio.
:::

# Pregunta de investigación

::: {.incremental}

1. ¿Cómo la evaluación de la centralidad identifica zonas críticas en la red de transporte y nodos relevantes? 
2. ¿Cómo facilita una gobernanza orientada a la resiliencia urbana ante inundaciones?

:::

:::{.notes}
Expongan la pregunta principal (por ejemplo, cómo la gobernanza puede mejorar la gestión de inundaciones) y justifiquen su relevancia.
:::

# Metodología e indicadores (I)

![](images/workflow_methodology.png){fig-align="center"}

# Metodología

::::{.columns}

:::{.column width="60%"}

```{=html}

<iframe width="900" height="420" src="/media/map_sampling_example_v0.html" title = "Origin and destination used and network" data-external="1"></iframe>
```

$$
\scriptstyle c_{B}(v) = \sum_{\substack{s \neq t \neq v \\ s,t \in V}} \frac{\sigma(s,t|v)}{\sigma(s,t)}
$$
:::

:::{.column width="40%" .smaller}

```{sql}
#| connection: eisenberg_connection
#| code-summary: shortest path using pgrouting
#| code-overflow: scroll
#| eval: false
#| echo: true

 CREATE TABLE centrality_200_200_porto AS
 SELECT   b.ogc_fid,
 b.the_geom,
 count(the_geom) as centrality 
 FROM  pgr_dijkstra('
  SELECT  ogc_fid AS id,
          fromid AS source,
          toid AS target,
          weight AS cost
  FROM porto_alegre_net_largest',
    ARRAY(SELECT net_id AS start_id FROM porto_200_origin  ),
    ARRAY(SELECT net_id AS end_id FROM porto_200_destination ),
       directed := TRUE) j
                      LEFT JOIN porto_alegre_net_largest AS b
                      ON j.edge = b.ogc_fid
                      GROUP BY  b.ogc_fid, b.the_geom
                      ORDER BY centrality DESC; 
```

:::

:::{.notes}
describan los indicadores que guían su análisis, como la participación de las partes interesadas, la coordinación interinstitucional y la distribución de responsabilidades.
:::

::::
# Resultados preliminares

Map with changes on edge betweenness

```{=html}
<iframe width="1200" height="550" src="/media/centrality_map_results.html" title = "Origin and destination used and network" data-external="1"></iframe>
```


:::{.notes}
Señalen los hallazgos iniciales o el progreso hasta el momento, incluso si no han finalizado la recolección de datos. Destaquen algún patrón o tendencia importante.
:::

# RQ 1: Network centrality (II)

Table with highest connectivity roads

```{=html}
<iframe width="1200" height="550" src="/media/centrality_table_results.html" title = "Origin and destination used and network" data-external="1"></iframe>
```

# Próximas etapas {.smaller}

::::{.columns .smaller}

:::{.column width="60%"}

![](images/gantt.png)

:::

:::{.column width="40%" .fragment .smaller} 

**Próximos pasos**

- Incorporar indicadores de vulnerabilidad
- Compartir datos preliminares con expertos e investigadores de Rio Grande do sul
- Compartir esta presentación ustedes

**Sugerencias**

[Google survey:](https://forms.gle/rzhhmuX9BezV6bZB6)

![](/images/frame.png){width="40%" fig-align="center"}

:::

::::

:::{.notes}
Expliquen las fases siguientes de la investigación, incluyendo los ajustes necesarios, las tareas pendientes y lo que esperan lograr en las próximas etapas.
:::